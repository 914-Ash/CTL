{% extends 'dashboard/base/base.html' %}
{% block title %} {{ user.author.author.username }} | Edit Profile {% endblock %}
{% block custom_css %} {% endblock %}

{% block body %}
{% if messages %}
<div class="messages">
    {% for message in messages %}
        <div class="alert alert-primary" {% if message.tags %}
             class="{{ message.tags }}"{% endif %}>{{ message }}</div>
    {% endfor %}
</div>
{% endif %}
<form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="image">プロフィール写真</label>
        <input type="file" name="image" id="image" accept="image/*" {% if not user.author.author_image %}{% endif %}>
        {% if user.author.author_image %}
            <img src="{{ user.author.author_image.url }}" alt="Profile Image" style="max-width: 200px; max-height: 200px;">
        {% endif %}
        {% if not user.author.author_image %}
        {% endif %}
    </div>
    <div class="form-group">
        <label for="fname">名:</label>
        <input type="text" name="fname" id="fname" value="{{ user.author.first_name }}" required>
        <small class="text-danger">必須</small>
    </div>
    <div class="form-group">
        <label for="lname">性:</label>
        <input type="text" name="lname" id="lname" value="{{ user.author.last_name }}" required>
        <small class="text-danger">必須</small>
    </div>
    <div class="form-group">
        <label for="email">メールアドレス:</label>
        <input type="email" name="email" id="email" value="{{ user.email }}" required>
        <small class="text-danger">必須</small>
    </div>
    <div class="form-group">
        <a href="{% url 'delete_user' user.id %}" class="btn btn-danger btn-sm">アカウントの削除</a>
    </div>
    <input type="submit" value="保存" class="btn btn-primary">
</form>
{% endblock %}
